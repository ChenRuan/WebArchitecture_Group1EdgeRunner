<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>Security Map</title>
    <style>
        html,
        body,
        #container {
            height: 100%;
            width: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
            font-size: 14px;
            font-family: Arial, Helvetica, sans-serif;
        }

        .wrap {
            width: 100%;
            height: 100%;
            position: relative;
        }

        #menu {
            position: absolute;
            left: 20px;
            top: 20px;
            right: 20px;
            height: 30px;
            display: flex;
            justify-content: space-between;
            transition: all .2s ease;
        }

        #menu .menu-ico {
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        #menu input {
            height: 40px;
            border: 1px solid #dbdbdb;
            border-radius: 5px 0 0 5px;
            padding: 8px 10px;
            box-sizing: border-box;
            width: 200px;
            outline: 0;
            border-right: 0;
        }

        .search {
            display: flex;
            align-items: center;
        }

        .search .bt {
            background-color: #fff;
            border: 1px solid #dbdbdb;
            border-left: 0px;
            width: 70px;
            padding-right: 10px;
            height: 40px;
            border-radius: 0 5px 5px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
        }

        .search .bt svg {
            width: 20px;
            height: 20px;
            margin-left: 10px;
            cursor: pointer;
        }

        #sidebar {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 240px;
            background-color: rgb(74, 81, 87);
            transition: all .2s ease;
            color: #fff;
            z-index: 999;

        }

        #sidebar h2 {
            padding: 20px;
            margin: 0;
            font-weight: normal;
            display: flex;
            align-items: center;
            font-size: 18px;
        }

        #sidebar h2 svg {
            margin-right: 10px;
        }

        .hide {
            left: -240px;
        }

        .show {
            left: 0;
        }

        .hideSide {
            padding-left: 0;
        }

        .showSide {
            padding-left: 240px;
        }

        #sidebar .item {
            padding: 0 20px 20px 20px;
        }

        #sidebar .item .tit {
            display: flex;
            align-items: center;
            font-size: 16px;
        }

        #sidebar .item .tit svg {
            margin-right: 10px;
        }

        #sidebar .item .row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            margin-top: 10px;
        }

        #sidebar .item .row select {
            width: 80px;
            height: 28px;
            outline: 0;
            border: 1px solid #dbdbdb;
            border-radius: 5px;
        }

        #sidebar .bot {
            position: absolute;
            left: 20px;
            bottom: 20px;
            width: 200px;
            display: flex;
            align-items: center;
            color: #fff;
            text-decoration: none;
        }

        #sidebar .bot:hover {
            color: #1d9ed7;
        }

        #sidebar .bot svg {
            margin-right: 10px;
        }

        .amap-marker-label {
            border: 0;
            background: none;
        }

        .amap-info-content {
            padding: 0;
        }

        .bottom-center .amap-info-sharp,
        .bottom-center .amap-info-sharp:after {
            display: none;
        }

        .amap-info-close {
            display: none;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <div id="container" class="map" tabindex="0"></div>
        <div id="sidebar" class="hide">
            <h2><svg t="1699712739023" class="icon" viewBox="0 0 1024 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" p-id="7041" width="16" height="16">
                    <path
                        d="M500.8 512.7c66.6 0 120.5-54 120.5-120.5 0-66.6-54-120.5-120.5-120.5s-120.5 54-120.5 120.5c-0.1 66.5 53.9 120.5 120.5 120.5z m0 447.7c-65.3 0-344.4-360.8-344.4-551S310.6 65 500.8 65s344.4 154.2 344.4 344.4-279.1 551-344.4 551z"
                        p-id="7042" fill="#ffffff"></path>
                </svg>Security Map</h2>
            <div class="item">
                <div class="tit"><svg t="1699712873627" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="8166" width="16" height="16">
                        <path
                            d="M554.666667 618.666667v85.333333l-42.666667-25.6v-187.733333L341.333333 298.666667h384l-170.666666 187.733333v132.266667z m85.333333-89.6L938.666667 213.333333H128l298.666667 315.733334V725.333333l213.333333 128v-324.266666z"
                            fill="#ffffff" p-id="8167"></path>
                    </svg> Filter</div>
                <div class="row">
                    Time interval
                    <select>
                        <option>1 month</option>
                        <option>three months</option>
                        <option>1 year</option>
                    </select>
                </div>
                <div class="row">
                    Crime Types
                    <select>
                        <option>all</option>
                        <option>theft</option>
                        <option>robbery</option>
                    </select>
                </div>
            </div>
            <a href="javascript:;" class="bot"><svg t="1699713850233" class="icon" viewBox="0 0 1024 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" p-id="9237" width="16" height="16">
                    <path
                        d="M512 328c-100.8 0-184 83.2-184 184S411.2 696 512 696 696 612.8 696 512 612.8 328 512 328z m0 320c-75.2 0-136-60.8-136-136s60.8-136 136-136 136 60.8 136 136-60.8 136-136 136z"
                        p-id="9238" fill="#ffffff"></path>
                    <path
                        d="M857.6 572.8c-20.8-12.8-33.6-35.2-33.6-60.8s12.8-46.4 33.6-60.8c14.4-9.6 20.8-27.2 16-44.8-8-27.2-19.2-52.8-32-76.8-8-14.4-25.6-24-43.2-19.2-24 4.8-48-1.6-65.6-19.2-17.6-17.6-24-41.6-19.2-65.6 3.2-16-4.8-33.6-19.2-43.2-24-14.4-51.2-24-76.8-32-16-4.8-35.2 1.6-44.8 16-12.8 20.8-35.2 33.6-60.8 33.6s-46.4-12.8-60.8-33.6c-9.6-14.4-27.2-20.8-44.8-16-27.2 8-52.8 19.2-76.8 32-14.4 8-24 25.6-19.2 43.2 4.8 24-1.6 49.6-19.2 65.6-17.6 17.6-41.6 24-65.6 19.2-16-3.2-33.6 4.8-43.2 19.2-14.4 24-24 51.2-32 76.8-4.8 16 1.6 35.2 16 44.8 20.8 12.8 33.6 35.2 33.6 60.8s-12.8 46.4-33.6 60.8c-14.4 9.6-20.8 27.2-16 44.8 8 27.2 19.2 52.8 32 76.8 8 14.4 25.6 22.4 43.2 19.2 24-4.8 49.6 1.6 65.6 19.2 17.6 17.6 24 41.6 19.2 65.6-3.2 16 4.8 33.6 19.2 43.2 24 14.4 51.2 24 76.8 32 16 4.8 35.2-1.6 44.8-16 12.8-20.8 35.2-33.6 60.8-33.6s46.4 12.8 60.8 33.6c8 11.2 20.8 17.6 33.6 17.6 3.2 0 8 0 11.2-1.6 27.2-8 52.8-19.2 76.8-32 14.4-8 24-25.6 19.2-43.2-4.8-24 1.6-49.6 19.2-65.6 17.6-17.6 41.6-24 65.6-19.2 16 3.2 33.6-4.8 43.2-19.2 14.4-24 24-51.2 32-76.8 4.8-17.6-1.6-35.2-16-44.8z m-56 92.8c-38.4-6.4-76.8 6.4-104 33.6-27.2 27.2-40 65.6-33.6 104-17.6 9.6-36.8 17.6-56 24-22.4-30.4-57.6-49.6-97.6-49.6-38.4 0-73.6 17.6-97.6 49.6-19.2-6.4-38.4-14.4-56-24 6.4-38.4-6.4-76.8-33.6-104-27.2-27.2-65.6-40-104-33.6-9.6-17.6-17.6-36.8-24-56 30.4-22.4 49.6-57.6 49.6-97.6 0-38.4-17.6-73.6-49.6-97.6 6.4-19.2 14.4-38.4 24-56 38.4 6.4 76.8-6.4 104-33.6 27.2-27.2 40-65.6 33.6-104 17.6-9.6 36.8-17.6 56-24 22.4 30.4 57.6 49.6 97.6 49.6 38.4 0 73.6-17.6 97.6-49.6 19.2 6.4 38.4 14.4 56 24-6.4 38.4 6.4 76.8 33.6 104 27.2 27.2 65.6 40 104 33.6 9.6 17.6 17.6 36.8 24 56-30.4 22.4-49.6 57.6-49.6 97.6 0 38.4 17.6 73.6 49.6 97.6-6.4 19.2-14.4 38.4-24 56z"
                        p-id="9239" fill="#ffffff"></path>
                </svg>Settings
            </a>
        </div>
        <div id="menu" class="hideSide">
            <svg onclick="toggleMenu()" class="menu-ico" t="1699709014701" class="icon" viewBox="0 0 1024 1024"
                version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4955" width="128" height="128">
                <path
                    d="M892.928 128q28.672 0 48.64 19.968t19.968 48.64l0 52.224q0 28.672-19.968 48.64t-48.64 19.968l-759.808 0q-28.672 0-48.64-19.968t-19.968-48.64l0-52.224q0-28.672 19.968-48.64t48.64-19.968l759.808 0zM892.928 448.512q28.672 0 48.64 19.968t19.968 48.64l0 52.224q0 28.672-19.968 48.64t-48.64 19.968l-759.808 0q-28.672 0-48.64-19.968t-19.968-48.64l0-52.224q0-28.672 19.968-48.64t48.64-19.968l759.808 0zM892.928 769.024q28.672 0 48.64 19.968t19.968 48.64l0 52.224q0 28.672-19.968 48.64t-48.64 19.968l-759.808 0q-28.672 0-48.64-19.968t-19.968-48.64l0-52.224q0-28.672 19.968-48.64t48.64-19.968l759.808 0z"
                    p-id="4956" fill="#666666"></path>
            </svg>
            <div class="search">
                <input id="tipinput" placeholder="Search the Place" />
                <div class="bt"><svg onclick="getAdr()" t="1699716579818" class="icon" viewBox="0 0 1024 1024"
                        version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10359" width="16" height="16">
                        <path
                            d="M712.0896 726.09792a30.72 30.72 0 0 1 39.79264-17.42848c73.48224 28.672 118.51776 70.28736 118.51776 121.91744 0 97.75104-166.2976 162.69312-368.64 162.69312s-368.64-64.94208-368.64-162.69312c0-51.63008 45.056-93.22496 118.51776-121.91744a30.72 30.72 0 0 1 22.34368 57.22112c-52.4288 20.48-79.42144 45.40416-79.42144 64.7168 0 48.0256 136.27392 101.23264 307.2 101.23264s307.2-53.20704 307.2-101.25312c0-19.29216-26.97216-44.21632-79.42144-64.69632a30.72 30.72 0 0 1-17.44896-39.79264z"
                            fill="#707070" p-id="10360"></path>
                        <path
                            d="M279.83872 222.76096l-3.54304 3.4816-3.4816 3.54304c-116.28544 120.15616-113.13152 311.82848 7.02464 428.09344l160.82944 155.648a87.8592 87.8592 0 0 0 122.18368 0l160.82944-155.648c2.37568-2.29376 4.7104-4.64896 7.02464-7.02464 116.28544-120.15616 113.13152-311.82848-7.02464-428.09344-123.71968-119.74656-320.1024-119.74656-443.84256 0z m42.72128 44.15488c99.90144-96.68608 258.49856-96.68608 358.4 0 95.76448 92.672 98.28352 245.4528 5.59104 341.21728l-2.7648 2.82624-163.6352 158.4128a26.4192 26.4192 0 0 1-36.7616 0l-160.82944-155.648c-95.76448-92.672-98.28352-245.4528-5.59104-341.21728l5.59104-5.59104z"
                            fill="#707070" p-id="10361"></path>
                        <path
                            d="M501.76 307.2a143.36 143.36 0 1 0 0 286.72 143.36 143.36 0 0 0 0-286.72z m0 61.44a81.92 81.92 0 1 1 0 163.84 81.92 81.92 0 0 1 0-163.84z"
                            fill="#707070" p-id="10362"></path>
                    </svg>
                    <svg onclick="search()" t="1699716623242" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="11482" width="16" height="16">
                        <path
                            d="M448 768c176.725333 0 320-143.274667 320-320 0-176.725333-143.274667-320-320-320-176.725333 0-320 143.274667-320 320 0 176.725333 143.274667 320 320 320z m0 42.666667c-200.298667 0-362.666667-162.368-362.666667-362.666667S247.701333 85.333333 448 85.333333s362.666667 162.368 362.666667 362.666667-162.368 362.666667-362.666667 362.666667z m304.917333-27.584a21.333333 21.333333 0 0 1 30.165334-30.165334l150.848 150.848a21.333333 21.333333 0 0 1-30.165334 30.165334l-150.848-150.826667z"
                            fill="#707070" p-id="11483"></path>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: '1d24673acdf3f420fea9dd3b5481eb16',
        }
    </script>
    <script
        src="https://webapi.amap.com/maps?v=2.0&key=23dcfbf91bf87f2d8be687cded2bdbb6&plugin=AMap.Geolocation,AMap.MarkerCluster"></script>

    <script type="text/javascript">
        var clu;
       
        var points = [{ "lnglat": ["113.864691", "22.942327"],'extData': {'id': 'DDD'} }, { "lnglat": ["113.370643", "22.938827"] }, { "lnglat": ["112.985037", "23.15046"] }, { "lnglat": ["110.361899", "20.026695"] }, { "lnglat": ["121.434529", "31.215641"] }, { "lnglat": ["120.682502", "28.011099"] }, { "lnglat": ["126.687123", "45.787618"] }, { "lnglat": ["103.970724", "30.397931"] }, { "lnglat": ["117.212164", "31.831641"] }, { "lnglat": ["121.411101", "31.059407"] }, { "lnglat": ["104.137953", "30.784276"] }, { "lnglat": ["120.499683", "30.042305"] }, { "lnglat": ["108.94686", "34.362975"] }, { "lnglat": ["112.873295", "22.920901"] }, { "lnglat": ["113.373916", "23.086728"] }, { "lnglat": ["113.250159", "23.075847"] }, { "lnglat": ["116.675933", "39.986343"] }, { "lnglat": ["120.75997", "31.734934"] }, { "lnglat": ["118.314741", "32.26999"] }, { "lnglat": ["111.723311", "34.771838"] }, { "lnglat": ["119.537126", "26.200017"] }, { "lnglat": ["113.830123", "23.00734"] }, { "lnglat": ["119.273795", "26.060002"] }, { "lnglat": ["116.466752", "39.951042"] }, { "lnglat": ["114.20716", "22.777829"] }, { "lnglat": ["126.118338", "45.11481"] }, { "lnglat": ["116.366324", "39.781077"] }, { "lnglat": ["120.377998", "31.578216"] }, { "lnglat": ["116.611935", "23.66941"] }, { "lnglat": ["103.787344", "30.940037"] }, { "lnglat": ["112.911223", "23.164952"] }, { "lnglat": ["121.946335", "39.403784"] }, { "lnglat": ["120.172545", "36.009391"] }, { "lnglat": ["126.609854", "45.722514"] }, { "lnglat": ["120.531699", "32.402873"] }, { "lnglat": ["118.914313", "32.013572"] }, { "lnglat": ["126.597762", "45.739299"] }, { "lnglat": ["106.540999", "29.520217"] }, { "lnglat": ["114.033057", "22.733424"] }, { "lnglat": ["104.041129", "30.598338"] }, { "lnglat": ["119.917693", "32.484184"] }, { "lnglat": ["118.371124", "35.082682"] }, { "lnglat": ["120.926368", "31.320681"] }, { "lnglat": ["120.355238", "31.557524"] }, { "lnglat": ["101.775209", "36.614975"] }, { "lnglat": ["114.499404", "34.646022"] }, { "lnglat": ["118.087516", "24.474988"] }, { "lnglat": ["104.638952", "30.1253"] }, { "lnglat": ["116.492237", "39.991802"] }, { "lnglat": ["112.898903", "32.04371"] }, { "lnglat": ["114.104018", "22.626803"] }, { "lnglat": ["119.969664", "30.26186"] }, { "lnglat": ["119.530013", "39.935889"] }, { "lnglat": ["77.254607", "39.050215"] }, { "lnglat": ["117.085608", "36.652113"] }, { "lnglat": ["120.292808", "30.299244"] }, { "lnglat": ["114.397917", "23.545706"] }, { "lnglat": ["120.273933", "30.236666"] }, { "lnglat": ["121.622443", "31.152955"] }, { "lnglat": ["116.417093", "39.96918"] }, { "lnglat": ["113.799453", "22.724031"] }, { "lnglat": ["123.264175", "41.768478"] }, { "lnglat": ["120.626128", "30.822477"] }, { "lnglat": ["115.826361", "33.812392"] }, { "lnglat": ["106.561797", "26.579832"] }, { "lnglat": ["117.285766", "34.806079"] }, { "lnglat": ["111.035766", "21.535775"] }, { "lnglat": ["115.701728", "24.066784"] }, { "lnglat": ["104.061447", "30.67089"] }, { "lnglat": ["121.123465", "31.134162"] }, { "lnglat": ["104.039519", "30.719365"] }, { "lnglat": ["116.625662", "39.619879"] }, { "lnglat": ["108.20204", "28.004321"] }, { "lnglat": ["113.606513", "34.807402"] }, { "lnglat": ["120.213822", "30.112851"] }, { "lnglat": ["120.727637", "27.798264"] }, { "lnglat": ["116.452761", "39.951122"] }, { "lnglat": ["119.555363", "39.932751"] }, { "lnglat": ["120.227111", "30.347169"] }, { "lnglat": ["113.377157", "31.797137"] }, { "lnglat": ["113.334007", "23.107744"] }, { "lnglat": ["112.641848", "22.362319"] }, { "lnglat": ["102.672195", "24.974215"] }, { "lnglat": ["120.190691", "30.305693"] }, { "lnglat": ["117.023543", "36.679076"] }, { "lnglat": ["118.868849", "31.918515"] }, { "lnglat": ["121.473372", "31.235574"] }, { "lnglat": ["116.526635", "37.131774"] }, { "lnglat": ["113.294417", "23.159512"] }, { "lnglat": ["120.163756", "30.39902"] }, { "lnglat": ["121.640998", "38.908202"] }, { "lnglat": ["112.767577", "22.445482"] }, { "lnglat": ["117.287658", "31.873351"] }, { "lnglat": ["117.219603", "39.211753"] }, { "lnglat": ["113.859931", "22.971467"] }, { "lnglat": ["112.438353", "34.666416"] }, { "lnglat": ["120.415793", "36.059608"] }, { "lnglat": ["120.704291", "31.825364"] }, { "lnglat": ["118.143882", "24.700477"] }, { "lnglat": ["119.364493", "32.328944"] }, { "lnglat": ["121.294195", "31.888728"] }, { "lnglat": ["113.365022", "22.57829"] }, { "lnglat": ["120.054198", "30.664807"] }, { "lnglat": ["87.658551", "44.008315"] }, { "lnglat": ["112.541595", "26.763181"] }, { "lnglat": ["115.471106", "30.787118"] }, { "lnglat": ["125.265486", "43.869571"] }, { "lnglat": ["116.644049", "39.807311"] }, { "lnglat": ["112.702588", "22.00886"] }, { "lnglat": ["120.430282", "29.365092"] }, { "lnglat": ["114.04317", "22.562925"] }, { "lnglat": ["121.22947", "31.016796"] }, { "lnglat": ["116.834305", "39.825053"] }, { "lnglat": ["106.28279", "29.960069"] }, { "lnglat": ["116.456392", "40.016161"] }, { "lnglat": ["120.255668", "30.435952"] }, { "lnglat": ["113.518903", "22.22175"] }, { "lnglat": ["106.543339", "29.612362"] }, { "lnglat": ["120.554869", "36.38975"] }, { "lnglat": ["116.833489", "39.254627"] }, { "lnglat": ["112.955801", "23.197491"] }, { "lnglat": ["117.398154", "31.985269"] }, { "lnglat": ["107.125098", "26.37983"] }, { "lnglat": ["130.891768", "47.017684"] }, { "lnglat": ["117.212348", "31.82965"] }, { "lnglat": ["113.376242", "22.935718"] }, { "lnglat": ["117.404318", "39.290364"] }, { "lnglat": ["120.034828", "28.908292"] }, { "lnglat": ["117.442801", "39.059195"] }, { "lnglat": ["115.112965", "35.75067"] }, { "lnglat": ["116.486205", "39.812739"] }, { "lnglat": ["121.567139", "31.132951"] }, { "lnglat": ["116.417075", "40.005976"] }, { "lnglat": ["113.335402", "23.021024"] }, { "lnglat": ["110.131995", "27.698087"] }, { "lnglat": ["126.683096", "45.744551"] }, { "lnglat": ["113.298626", "40.086031"] }, { "lnglat": ["120.455786", "30.482805"] }, { "lnglat": ["103.941726", "30.731199"] }, { "lnglat": ["116.455054", "39.957415"] }, { "lnglat": ["112.554404", "22.380084"] }, { "lnglat": ["116.26261", "39.929069"] }, { "lnglat": ["119.177588", "34.614112"] }, { "lnglat": ["118.088614", "24.475403"] }, { "lnglat": ["116.55152", "40.101459"] }, { "lnglat": ["120.189177", "30.19047"] }, { "lnglat": ["119.212254", "36.973457"] }, { "lnglat": ["116.488509", "40.010936"] }, { "lnglat": ["118.868438", "32.022459"] }, { "lnglat": ["116.266745", "40.173843"] }, { "lnglat": ["115.970453", "25.882221"] }, { "lnglat": ["116.664405", "39.908343"] }, { "lnglat": ["117.322303", "31.876551"] }, { "lnglat": ["113.253249", "22.678387"] }, { "lnglat": ["120.070244", "28.889153"] }, { "lnglat": ["113.532531", "23.518578"] }, { "lnglat": ["113.328055", "23.062808"] }, { "lnglat": ["112.185221", "30.916571"] }, { "lnglat": ["116.497861", "39.893085"] }, { "lnglat": ["113.379629", "23.082417"] }, { "lnglat": ["121.343413", "30.886412"] }, { "lnglat": ["114.05162", "22.524886"] }, { "lnglat": ["121.509567", "31.333962"] }, { "lnglat": ["132.035534", "47.260814"] }, { "lnglat": ["103.973258", "30.798726"] }, { "lnglat": ["117.707663", "34.789347"] }, { "lnglat": ["103.958617", "30.740791"] }, { "lnglat": ["119.343977", "26.016675"] }, { "lnglat": ["104.080575", "30.643782"] }, { "lnglat": ["105.721869", "30.245337"] }, { "lnglat": ["114.277586", "30.580675"] }, { "lnglat": ["116.34973", "40.037138"] }, { "lnglat": ["106.444014", "29.603246"] }, { "lnglat": ["120.306067", "31.849954"] }, { "lnglat": ["113.760686", "23.005223"] }, { "lnglat": ["113.724829", "29.562468"] }, { "lnglat": ["120.357642", "32.553576"] }, { "lnglat": ["105.097096", "25.630516"] }, { "lnglat": ["108.99142", "32.713966"] }, { "lnglat": ["118.940825", "42.279635"] }, { "lnglat": ["113.269645", "22.923776"] }, { "lnglat": ["120.337876", "31.574167"] }, { "lnglat": ["118.087911", "32.413947"] }, { "lnglat": ["120.235762", "31.611346"] }, { "lnglat": ["113.966209", "22.540022"] }, { "lnglat": ["113.849914", "23.004983"] }, { "lnglat": ["120.068236", "30.146813"] }, { "lnglat": ["120.724952", "31.279957"] }, { "lnglat": ["121.034476", "37.478317"] }, { "lnglat": ["118.458158", "24.732747"] }, { "lnglat": ["116.426512", "39.916564"] }, { "lnglat": ["121.808081", "31.07548"] }, { "lnglat": ["119.405845", "36.078322"] }, { "lnglat": ["113.233191", "23.165046"] }, { "lnglat": ["126.751905", "45.744526"] }, { "lnglat": ["121.337802", "37.37611"] }, { "lnglat": ["121.553374", "31.840728"] }, { "lnglat": ["118.647811", "32.067122"] }, { "lnglat": ["125.211959", "43.809576"] }, { "lnglat": ["103.889868", "30.788486"] }, { "lnglat": ["114.044456", "22.597911"] }, { "lnglat": ["113.292785", "23.123191"] }, { "lnglat": ["114.55268", "36.915218"] }, { "lnglat": ["116.012549", "37.213845"] }, { "lnglat": ["116.491195", "39.130669"] }, { "lnglat": ["120.378753", "36.310296"] }, { "lnglat": ["113.042449", "28.13898"] ,extData: {'id':'DDD'}}, { "lnglat": ["113.677151", "23.189573"] }, { "lnglat": ["120.215308", "35.96833"] }, { "lnglat": ["113.934661", "22.525104"] }, { "lnglat": ["121.403258", "31.28011"] }, { "lnglat": ["116.38798", "39.907185"] }, { "lnglat": ["116.455489", "39.743495"] }, { "lnglat": ["114.073353", "22.529565"] }, { "lnglat": ["123.419765", "41.760284"] }, { "lnglat": ["120.214758", "27.305358"] }, { "lnglat": ["115.466795", "38.873725"] }, { "lnglat": ["120.169533", "30.279704"] }, { "lnglat": ["123.551955", "41.875033"] }, { "lnglat": ["117.278212", "31.867047"] }, { "lnglat": ["116.642648", "39.913549"] }, { "lnglat": ["116.130912", "41.535434"] }, { "lnglat": ["106.455516", "29.540513"] }, { "lnglat": ["106.371329", "29.616652"] }, { "lnglat": ["114.452956", "36.622031"] }, { "lnglat": ["114.303153", "22.717162"] }, { "lnglat": ["117.205588", "38.714259"] }, { "lnglat": ["114.878646", "23.838349"] }, { "lnglat": ["121.36824", "31.103936"] }, { "lnglat": ["112.339652", "22.966865"] }, { "lnglat": ["120.637961", "31.829968"] }, { "lnglat": ["123.354857", "41.629878"] }, { "lnglat": ["115.778511", "40.323991"] }, { "lnglat": ["120.063041", "30.286815"] }, { "lnglat": ["113.015891", "23.690324"] }, { "lnglat": ["111.410544", "30.558758"] }, { "lnglat": ["118.950187", "25.853889"] }, { "lnglat": ["119.467673", "32.388632"] }, { "lnglat": ["118.784104", "32.038313"] }, { "lnglat": ["102.759093", "24.7329"] }, { "lnglat": ["117.120749", "39.098487"] }, { "lnglat": ["121.251639", "37.557559"] }, { "lnglat": ["120.728919", "31.24543"] }, { "lnglat": ["117.165205", "34.227349"] }, { "lnglat": ["118.547895", "24.908295"] }, { "lnglat": ["107.442786", "31.278743"] }, { "lnglat": ["114.420546", "30.462489"] }, { "lnglat": ["113.430929", "23.137439"] }, { "lnglat": ["117.684462", "36.89012"] }, { "lnglat": ["116.120249", "39.073079"] }, { "lnglat": ["116.63951", "40.168692"] }, { "lnglat": ["113.873229", "34.268127"] }, { "lnglat": ["119.539657", "39.979231"] }, { "lnglat": ["116.487006", "39.905768"] }, { "lnglat": ["125.345618", "43.832965"] }, { "lnglat": ["118.137983", "24.655278"] }, { "lnglat": ["103.876098", "30.174342"] }, { "lnglat": ["113.397841", "22.89729"] }, { "lnglat": ["98.325356", "24.251544"] }, { "lnglat": ["120.647617", "30.952838"] }, { "lnglat": ["111.176222", "23.213034"] }, { "lnglat": ["104.012847", "30.618165"] }, { "lnglat": ["116.284011", "39.949896"] }, { "lnglat": ["122.047935", "47.191033"] }, { "lnglat": ["109.456499", "24.311113"] }, { "lnglat": ["119.379004", "32.185416"] }, { "lnglat": ["114.838172", "24.030066"] }, { "lnglat": ["120.194083", "30.233381"] }, { "lnglat": ["116.292617", "39.924312"] }, { "lnglat": ["116.486175", "39.884333"] }, { "lnglat": ["103.995123", "30.634898"] }, { "lnglat": ["118.932089", "33.833338"] }, { "lnglat": ["118.882644", "31.944689"] }, { "lnglat": ["114.296439", "30.573014"] }, { "lnglat": ["120.72319", "30.421875"] }, { "lnglat": ["112.814192", "27.837052"] }];
        var map = new AMap.Map("container", {
            center: [104.937478, 35.439575],
            zoom: 5
        });
        function getAdr() {
            var geolocation = new AMap.Geolocation({
                enableHighAccuracy: true,
                timeout: 10000,          
                buttonPosition: 'RB',    
                buttonOffset: new AMap.Pixel(10, 20),
                zoomToAccuracy: true,   

            });
            map.addControl(geolocation);
            geolocation.getCurrentPosition(function (status, result) {
                if (status == 'complete') {
                    onComplete(result)
                } else {
                    onError(result)
                }
            });
        }

        
        function onComplete(data) {
            console.log(data);
            

        }
        
        function onError(data) {
            console.log(data);

        }
        var gridSize = 50;
        function search(){
            var value = document.getElementById('tipinput').value;
            if (clu) {
                clu.setMap(null);
            }
            clu = new AMap.MarkerCluster(map, points, {
                // styles: sts, 
                gridSize: gridSize,
                renderClusterMarker: (cluster) => {
                    
                    var bg = 'http://webapi.amap.com/theme/v1.3/m2.png';
                    if (cluster.count < gridSize / 2) {
                        bg = 'http://webapi.amap.com/theme/v1.3/m1.png';
                    }
                    if (cluster.count > gridSize * 2) {
                        bg = 'http://webapi.amap.com/theme/v1.3/m3.png';
                    }
                    cluster.marker.setContent(`<div style="width:53px;height:53px;background: url(`+bg+`) no-repeat;background-size:100% 100%;line-height:53px;text-align:center;">`+cluster.count+`</div>`);
                    if(cluster.clusterData[0].extData && cluster.clusterData[0].extData.id == value){
                        infoWindow = new AMap.InfoWindow({ offset: new AMap.Pixel(-66, 190) });
                        infoWindow.setContent(`<div style="border:1px solid #dbdbdb;padding:20px;width:260px;background:#ffff"><p style="margin:0;font-size:16px;">`+cluster.clusterData[0].extData.id+`</p><p style="margin:2px 0;font-weight:bold;">Response speed</p><p style="display:flex;justify-content:space-between;margin:2px 0">Robbery <span>60</span></p><p style="display:flex;margin:2px 0;justify-content:space-between">Theft <span>105</span></p></div>`);
                        infoWindow.open(map, cluster.marker.getPosition());
                    }
                    infoWindow = new AMap.InfoWindow({ offset: new AMap.Pixel(26, 190) });
                    cluster.marker.on('mouseover', () => {
                        console.log(cluster);
                        infoWindow.setContent('<div style="border:1px solid #dbdbdb;padding:20px;width:260px;background:#ffff"><p style="margin:0;font-size:16px;">E20 1EJ</p><p style="margin:2px 0;font-weight:bold;">Response speed</p><p style="display:flex;justify-content:space-between;margin:2px 0">Robbery <span>60</span></p><p style="display:flex;margin:2px 0;justify-content:space-between">Theft <span>105</span></p></div>');
                        infoWindow.open(map, cluster.marker.getPosition());
                    });
                    
                    cluster.marker.on('mouseout', () => {
                        
                        infoWindow.close();
                    });
                },
                renderMarker: (context) => {

                }

            });
        }
        addCluster();
        var infoWindow = new AMap.InfoWindow({ offset: new AMap.Pixel(26, 190) });
        function addCluster(tag) {
            if (clu) {
                clu.setMap(null);
            }          
            clu = new AMap.MarkerCluster(map, points, {
                // styles: sts, 
                gridSize: gridSize,
                renderClusterMarker: (cluster) => {
                    console.log(clu);
                    var bg = 'http://webapi.amap.com/theme/v1.3/m2.png';
                    if (cluster.count < gridSize / 2) {
                        bg = 'http://webapi.amap.com/theme/v1.3/m1.png';
                    }
                    if (cluster.count > gridSize * 2) {
                        bg = 'http://webapi.amap.com/theme/v1.3/m3.png';
                    }
                    cluster.marker.setContent(`<div style="width:53px;height:53px;background: url(`+bg+`) no-repeat;background-size:100% 100%;line-height:53px;text-align:center;">`+cluster.count+`</div>`);
                    
                    cluster.marker.on('mouseover', () => {
                        console.log(cluster);
                        infoWindow.setContent('<div style="border:1px solid #dbdbdb;padding:20px;width:260px;background:#ffff"><p style="margin:0;font-size:16px;">E20 1EJ</p><p style="margin:2px 0;font-weight:bold;">Response speed</p><p style="display:flex;justify-content:space-between;margin:2px 0">Robbery <span>60</span></p><p style="display:flex;margin:2px 0;justify-content:space-between">Theft <span>105</span></p></div>');
                        infoWindow.open(map, cluster.marker.getPosition());
                    });
                    
                    cluster.marker.on('mouseout', () => {
                        
                        infoWindow.close();
                    });
                },
                renderMarker: (context) => {

                }

            });
            
            clu.on('click', (data) => {
                if (data.clusterData.length <= 1) return;
                let alng = 0,
                    alat = 0;
                for (const m of data.clusterData) {
                    alng += m.lnglat.lng;
                    alat += m.lnglat.lat;
                }
                const lat = alat / data.clusterData.length;
                const lng = alng / data.clusterData.length;
                
                map.setZoom(10);
                map.setCenter([lng, lat]);
            });
        }
        function toggleMenu() {
            var side = document.getElementById('sidebar');
            if (side.getAttribute('class').indexOf('hide') > -1) {
                side.className = side.className.replace('hide', 'show');
            } else {
                side.className = side.className.replace('show', 'hide');
            }
            var menu = document.getElementById('menu');
            if (menu.getAttribute('class').indexOf('hide') > -1) {
                menu.className = menu.className.replace('hideSide', 'showSide');
            } else {
                menu.className = menu.className.replace('showSide', 'hideSide');
            }
        }
    </script>
</body>

</html>